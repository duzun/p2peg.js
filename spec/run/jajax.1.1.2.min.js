/*
 MIT
  @version 1.1.2
  @git https://github.com/duzun/jAJAX
  @umd AMD, Browser, CommonJs
  @author DUzun.Me
*/
(function(D,t,x,u,I,y){("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(p,h){module.exports=h()}:function(p,h){t[D]=h()})([],function(){function p(f){return null===f?"Null":void 0===f?"Undefined":J.call(f).slice(8,-1)}function h(f){return f instanceof I||"Function"==p(f)}function n(f,l){if(!f)return f;var a,b,q;(b=z(f))||(b=A.call(f,"length")&&"number"===typeof f.length&&!h(f));if(b)for(a=0,q=f.length>>>0;a<q;a++){if(A.call(f,a)&&(b=f[a],!1===l.call(b,
a,b,f)))return a}else for(a in f)if(A.call(f,a)&&(b=f[a],!1===l.call(b,a,b,f)))return a;return f}function K(f){function l(a,b){f[a]=b}n(arguments,function(a,b){a&&n(b,l)});return f}var E=x.noop||function(){},B=x.prototype,A=B.hasOwnProperty,J=B.toString,L="function"==typeof y.now?function(){return y.now()}:function(){return new y.getTime},z=h(u.isArray)?u.isArray:u.isArray=function(f){return f instanceof u||"Array"==p(f)},e="undefined"!==typeof self&&h(self.setTimeout)?self:t;h(e.setTimeout)||"undefined"!==
typeof require&&(e=require("sdk/timers"));var C=e.setTimeout,M=e.clearTimeout,F={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},e=function l(a,b,q,m){var d=l.createXHR(!1);if(!d)return q&&q(null,"xhr","Couldn't create XHR object"),d;"String"==p(a)&&(b&&"Object"==p(b)?(b.url=a,a=b,b=q,q=m):a={url:a});a=K({url:"",type:"GET",cache:!1,timeout:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"",mimeType:"",
data:null,headers:null,error:null,success:null},a);var e={};m=function(a,c){e[a.toLowerCase()]=[a,c]};var c=a.method||a.type,k=a.url,g,v=function(G,c,b,g){a.error&&a.error(b||g,c,G,g);q&&q(b||g,c,G,g)},N=function(c,g){var d=c.responseText,k=a.dataType||l.mimeToDataType(a.mimeType||c.getResponseHeader("content-type")),e;try{switch(k){case "json":d="responseJSON"in c?c.responseJSON:/^\s*$/.test(d)?null:l.parseJSON(d);break;case "xml":d=c.responseXML;break;case "script":(0,eval)(d)}}catch(h){e=h}e?v(e,
"parsererror",c,g):(a.success&&a.success(d,c.statusText,c,g),b&&b(d,c.statusText,c,g))},h=function(a,c){g&&M(g);200<=a.status&&300>a.status||304==a.status?N(a,c):v(a.statusText||null,a.status?"error":"abort",a,c)};n({"X-Requested-With":"XMLHttpRequest"},m);a.contentType&&m("Content-Type",a.contentType);m("Accept",(F[a.dataType]?F[a.dataType]+", ":"")+"*/*; q=0.01");n(a.headers,m);c=c.toLowerCase();!a.data||"get"!=c&&"head"!=c||(k+=(0>k.indexOf("?")?"?":"&")+l.param(a.data),a.data=null);if("REQUEST"==
l.xhr_type){n(a.data,function(a,c,b){null==c&&delete b[a]});var r={url:k,content:a.data?a.data:{},headers:{},onComplete:function(a){r.aborted||h({getResponseHeader:function(c){return a.headers[c]},status:a.status,statusText:a.statusText,responseText:a.text,responseJSON:a.json},a)}};n(e,function(a,c){c[0]&&null!=c[0]&&(r.headers[c[0]]=c[1])});a.contentType&&(r.contentType=a.contentType);0<a.timeout&&(g=C(function(){r.aborted=L();v(null,"timeout",d)},a.timeout));try{d.Request(r)[c]()}catch(H){try{r.headers["X-HTTP-Method-Override"]=
c.toUpperCase(),d.Request(r).post()}catch(H){switch(c){case "delete":var w=new (require("sdk/net/xhr").XMLHttpRequest);w.open(c,k);n(r.headers,function(a,c){w.setRequestHeader(a,c)});w.send();h(w);break;default:throw H;}}}}else d.open(c,k,!0),n(e,function(a,c){null!=c[1]&&d.setRequestHeader(c[0],c[1]+"")}),0<a.timeout&&(g=C(function(){d.onreadystatechange=E;d.abort();v(null,"timeout",d)},a.timeout)),m=function(){4==d.readyState&&(d.onreadystatechange=E,h(d))},d.send(a.data?"string"==typeof a.data?
a.data:l.param(a.data):null),4===d.readyState?C(m):d.onreadystatechange=m;return d};(function(e,a,b){function h(a,b,g,d){var e,l=z(b),m=b&&b!==t&&!l&&x.getPrototypeOf(b)===B;n(b,function(b,k){e=z(k)?"array":typeof k;d&&(b=g?d:d+"["+(m||"object"==e||"array"==e?b:"")+"]");!d&&l?a.add(k.name,k.value):"array"==e||!g&&"object"==e?h(a,k,g,b):a.add(b,k)})}b.param=function(a,b){var d=[];d.add=function(a,c){this.push(e(a)+(null==c?"":"="+e(c)))};h(d,a,b);return d.join("&").replace(/%20/g,"+")};var m=/^(?:text|application)\/javascript/i,
d=/^(?:text|application)\/xml/i;b.mimeToDataType=function(a){a&&(a=a.split(";",2)[0]);return a&&("text/html"==a?"html":"application/json"==a?"json":m.test(a)?"script":d.test(a)&&"xml")||"text"};var p=a&&a.parse||t.json_decode;b.parseJSON=function(a){try{return p(a)}catch(b){var d=a.replace(/[\n\r]+\s*\/\/[^\n\r]*/g,"");if(d!=a)return p(d);throw b;}};b.createXHR=function(a){n({XMLHttpRequest:function(){return new t.XMLHttpRequest},MSXML2:function(){return new ActiveXObject("Msxml2.XMLHTTP")},MSXML:function(){return new ActiveXObject("Microsoft.XMLHTTP")},
MSXML24:function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},REQUEST:function g(){return g.xhr||(g.xhr=require("sdk/request"))}},function(d,e){try{return a=e(),b.createXHR=e,b.xhr_type=d,!1}catch(h){}});return a};b.xhr_supported=b.createXHR(!1)})(encodeURIComponent,JSON,e);e.name=D;e.version="1.1.2";return e})})("jajax","undefined"==typeof global?this:global,Object,Array,Function,Date);