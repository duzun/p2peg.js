/*
 MIT
  @version 1.1.0
  @git https://github.com/duzun/jAJAX
  @umd AMD, Browser, CommonJs
  @author DUzun.Me
*/
(function(A,n,w,p,G,t){("function"==typeof define&&define.amd?define:"undefined"!=typeof module&&module.exports?function(n,m){module.exports=m()}:function(p,m){n[A]=m()})([],function(){var B=w.noop||function(){},m=w.prototype,x=m.hasOwnProperty,H=m.toString,I="function"==typeof t.now?function(){return t.now()}:function(){return new t.getTime},C=function(e){return null===e?"Null":void 0===e?"Undefined":H.call(e).slice(8,-1)},D=function(e){return e instanceof G||"Function"==C(e)},y=D(p.isArray)?p.isArray:
p.isArray=function(e){return e instanceof p||"Array"==C(e)},g=function(e,k){if(!e)return e;var a,d,g;(d=y(e))||(d=x.call(e,"length")&&"number"===typeof e.length&&!D(e));if(d)for(a=0,g=e.length>>>0;a<g;a++){if(x.call(e,a)&&(d=e[a],!1===k.call(d,a,d,e)))return a}else for(a in e)if(x.call(e,a)&&(d=e[a],!1===k.call(d,a,d,e)))return a;return e},J=function(e){function k(a,d){e[a]=d}g(arguments,function(a,e){a&&g(e,k)});return e},f="undefined"!==typeof self&&"function"==typeof self.setTimeout?self:n;"function"!=
typeof f.setTimeout&&"undefined"!==typeof require&&(f=require("sdk/timers"));var z=f.setTimeout,K=f.clearTimeout,E={"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},f=function k(a,d,f){var c=k.createXHR(!1);if(!c)return f&&f(null,"xhr","Couldn't create XHR object"),c;"string"==typeof a&&(a={url:a});a=J({url:"",type:"GET",cache:!1,timeout:null,contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"",mimeType:"",
data:null,headers:null,error:null,success:null},a);var m={},l=function(a,b){m[a.toLowerCase()]=[a,b]},b=a.type,q=a.url,h,u=function(F,b,d,h){a.error&&a.error(d||h,b,F,h);f&&f(d||h,b,F,h)},L=function(b,h){var c=b.responseText,q=a.dataType||k.mimeToDataType(a.mimeType||b.getResponseHeader("content-type")),f;try{switch(q){case "json":c="responseJSON"in b?b.responseJSON:/^\s*$/.test(c)?null:k.parseJSON(c);break;case "xml":c=b.responseXML;break;case "script":(0,eval)(c)}}catch(g){f=g}f?u(f,"parsererror",
b,h):(a.success&&a.success(c,b.statusText,b,h),d&&d(c,b.statusText,b,h))},n=function(a,b){h&&K(h);200<=a.status&&300>a.status||304==a.status?L(a,b):u(a.statusText||null,a.status?"error":"abort",a,b)};g({"X-Requested-With":"XMLHttpRequest"},l);a.contentType&&l("Content-Type",a.contentType);l("Accept",(E[a.dataType]?E[a.dataType]+", ":"")+"*/*; q=0.01");g(a.headers,l);b=b.toLowerCase();!a.data||"get"!=b&&"head"!=b||(q+=(0>q.indexOf("?")?"?":"&")+k.param(a.data),a.data=null);if("REQUEST"==k.xhr_type){g(a.data,
function(a,b,h){null==b&&delete h[a]});var r={url:q,content:a.data?a.data:{},headers:{},onComplete:function(a){r.aborted||n({getResponseHeader:function(b){return a.headers[b]},status:a.status,statusText:a.statusText,responseText:a.text,responseJSON:a.json},a)}};g(m,function(a,b){b[0]&&null!=b[0]&&(r.headers[b[0]]=b[1])});a.contentType&&(r.contentType=a.contentType);0<a.timeout&&(h=z(function(){r.aborted=I();u(null,"timeout",c)},a.timeout));try{c.Request(r)[b]()}catch(p){try{r.headers["X-HTTP-Method-Override"]=
b.toUpperCase(),c.Request(r).post()}catch(M){switch(b){case "delete":var v=new (require("sdk/net/xhr").XMLHttpRequest);v.open(b,q);g(r.headers,function(a,b){v.setRequestHeader(a,b)});v.send();n(v);break;default:throw M;}}}}else c.open(b,q,!0),g(m,function(a,b){null!=b[1]&&c.setRequestHeader(b[0],b[1]+"")}),0<a.timeout&&(h=z(function(){c.onreadystatechange=B;c.abort();u(null,"timeout",c)},a.timeout)),l=function(){4==c.readyState&&(c.onreadystatechange=B,n(c))},c.send(a.data?k.param(a.data):null),4===
c.readyState?z(l):c.onreadystatechange=l;return c};(function(f,a,d){function p(a,c,h,d){var f,k=y(c),l=c&&c!==n&&!k&&w.getPrototypeOf(c)===m;g(c,function(c,g){f=y(g)?"array":typeof g;d&&(c=h?d:d+"["+(l||"object"==f||"array"==f?c:"")+"]");!d&&k?a.add(g.name,g.value):"array"==f||!h&&"object"==f?p(a,g,h,c):a.add(c,g)})}d.param=function(a,c){var d=[];d.add=function(a,b){this.push(f(a)+(null==b?"":"="+f(b)))};p(d,a,c);return d.join("&").replace(/%20/g,"+")};var c=/^(?:text|application)\/javascript/i,t=
/^(?:text|application)\/xml/i;d.mimeToDataType=function(a){a&&(a=a.split(";",2)[0]);return a&&("text/html"==a?"html":"application/json"==a?"json":c.test(a)?"script":t.test(a)&&"xml")||"text"};var l=a&&a.parse||n.json_decode;d.parseJSON=function(a){try{return l(a)}catch(c){var d=a.replace(/[\n\r]+\s*\/\/[^\n\r]*/g,"");if(d!=a)return l(d);throw c;}};d.createXHR=function(a){g({XMLHttpRequest:function(){return new n.XMLHttpRequest},MSXML2:function(){return new ActiveXObject("Msxml2.XMLHTTP")},MSXML:function(){return new ActiveXObject("Microsoft.XMLHTTP")},
MSXML24:function(){return new ActiveXObject("Msxml2.XMLHTTP.4.0")},REQUEST:function h(){return h.xhr||(h.xhr=require("sdk/request"))}},function(c,f){try{return a=f(),d.createXHR=f,d.xhr_type=c,!1}catch(g){}});return a};d.xhr_supported=d.createXHR(!1)})(encodeURIComponent,JSON,f);f.name=A;f.version="1.1.0";return f})})("jajax","undefined"==typeof global?this:global,Object,Array,Function,Date);